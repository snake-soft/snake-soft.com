{% load static %}
<script src="{% static "js/base.js" %}"></script>
<link rel="stylesheet" href="{% static "css/base.css" %}" />

<script defer src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>

<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

<link href="https://use.fontawesome.com/releases/v5.12.0/css/all.css" rel="stylesheet" />

<!-- Highlight.js -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>

<script>
var text = `{{random_file.read | safe }}`;
async function float(){
  await new Promise(resolve => setTimeout(resolve, 500));
  for (var i = 0; i<text.length; i++){
    $('#code_runner').append(text[i]);
    if (text[i] == '\n'){
      var code = $('#code_runner').text();
      code = hljs.fixMarkup(code);
      code = hljs.highlight('python', code).value
      $('#code_runner').html(code);
    }
    await new Promise(resolve => setTimeout(resolve, 50));
  }
}

$(document).ready(function() {
  //var obj = $('#code_runner')
  //var code = hljs.highlight('python', obj.html()).value;
  //obj.html(hljs.fixMarkup(code)); 
  //$('#code_runner').append(text);//hljs.highlight('python', text).value);
    $('[data-toggle="tooltip"]').tooltip();
    float();
});
</script>